<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title></title>

<script src="README_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="README_files/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="README_files/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="README_files/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="README_files/bootstrap-3.3.1/shim/respond.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="README_files/highlight/default.css"
      type="text/css" />
<script src="README_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">




<div id="wtregdo" class="section level2">
<h2>WtRegDO</h2>
<div id="marcus-w.-beck-beck.marcusepa.gov" class="section level4">
<h4><em>Marcus W. Beck, <a href="mailto:beck.marcus@epa.gov">beck.marcus@epa.gov</a></em></h4>
<p>Linux: <a href="https://travis-ci.org/fawda123/WtRegDO"><img src="https://travis-ci.org/fawda123/WtRegDO.svg?branch=master" alt="Travis-CI Build Status" /></a></p>
<p>Windows: <a href="https://ci.appveyor.com/project/fawda123/WtRegDO"><img src="https://ci.appveyor.com/api/projects/status/github/fawda123/WtRegDO?branch=master" alt="AppVeyor Build Status" /></a></p>
<p>This is the public repository of supplementary material to accompany the manuscript “Improving estimates of ecosystem metabolism by reducing effects of tidal advection on dissolved oxygen time series”, submitted to Limnology and Oceanography Methods. The package includes a sample dataset and functions to implement weighted regression on dissolved oxygen time series to reduce the effects of tidal advection. Functions are also available to estimate net ecosystem metabolism using the open-water method.</p>
<p>The development version of this package can be installed from Github:</p>
<pre class="r"><code>install.packages(&#39;devtools&#39;)
library(devtools)
install_github(&#39;fawda123/WtRegDO&#39;)</code></pre>
</div>
<div id="citation" class="section level3">
<h3>Citation</h3>
<p>Please cite this package using the submitted manuscript.</p>
<p><em>Beck MW, Hagy III JD, Murrell MC. 2015 (in press). Improving estimates of ecosystem metabolism by reducing effects of tidal advection on dissolved oxygen time series. Limnology and Oceanography Methods. DOI: <a href="http://onlinelibrary.wiley.com/doi/10.1002/lom3.10062/abstract">10.1002/lom3.10062</a></em></p>
</div>
<div id="functions" class="section level3">
<h3>Functions</h3>
<p>Load the sample dataset and run weighted regression. See the function help files for details.</p>
<pre class="r"><code># load library and sample data
library(WtRegDO)
data(SAPDC)

# run weighted regression in parallel
# requires parallel backend
library(doParallel)
registerDoParallel(cores = 7)

# metadata for the location
tz &lt;- &#39;America/Jamaica&#39;
lat &lt;- 31.39
long &lt;- -89.28

# weighted regression
res &lt;- wtreg(SAPDC, parallel = TRUE, wins = list(6, 1, NULL), progress = TRUE, 
  tz = tz, lat = lat, long = long)

# estimate ecosystem metabolism using observed DO time series
metab_obs &lt;- ecometab(res, DO_var = &#39;DO_obs&#39;, tz = tz, 
  lat = lat, long = long)

# estimate ecosystem metabolism using detided DO time series
metab_dtd &lt;- ecometab(res, DO_var = &#39;DO_nrm&#39;, tz = tz, 
  lat = lat, long = long)</code></pre>
<p>The metabolism results can be plotted by aggregation periods of the daily estimates or smoothed using a moving window filter.</p>
<pre class="r"><code>data(SAPDC)

# metadata for the location
tz &lt;- &#39;America/Jamaica&#39;
lat &lt;- 31.39
long &lt;- -89.28

# estimate ecosystem metabolism using observed DO time series
met_ex &lt;- ecometab(SAPDC, DO_var = &#39;DO_obs&#39;, tz = tz,
 lat = lat, long = long)

# plot by monthly averages
plot(met_ex)</code></pre>
<p><img src="README_files/figure-html/unnamed-chunk-4-1.png" /></p>
<pre class="r"><code># plot after filtering with a centered 20 day moving average
plot(met_ex, by = 20)</code></pre>
<p><img src="README_files/figure-html/unnamed-chunk-4-2.png" /></p>
</div>
<div id="license" class="section level3">
<h3>License</h3>
<p>This package is released in the public domain under the creative commons license <a href="https://tldrlegal.com/license/creative-commons-cc0-1.0-universal">CC0</a>.</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
